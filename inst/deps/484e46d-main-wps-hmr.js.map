{"version":3,"sources":["webpack:///./src/lib/components/DashSeqaln.react.js"],"names":["DashSeqaln","props","id","title","alignment","series","included","excluded","color_scheme","setProps","_props$allow_sequence","allow_sequence_selection","_props$show_letters","show_letters","_props$show_seqnum","show_seqnum","_props$zoom","zoom","alnLength","Object","keys","length","labelRef","useRef","scaleRef","scrollViewportRef","_useState","useState","_useState2","_slicedToArray","labelWidth","setLabelWidth","_useState3","_useState4","scaleWidth","setScaleWidth","_useState5","_useState6","scrollViewportWidth","setScrollViewportWidth","_useState7","_useState8","highlightedRow","setHighlightedRow","_useState9","_useState10","highlightedCol","setHighlightedCol","_useState11","_useState12","renderBounds","setRenderBounds","_useState13","_useState14","ticking","setTicking","useLayoutEffect","lw","current","getBoundingClientRect","width","sw","svw","getRenderBounds","scrollLeft","scrollWidth","stickyWidth","setIncluded","items","map","x","name","setExcluded","setHighlighted","row","col","handleScroll","console","log","window","requestAnimationFrame","alignment_cumsum","useMemo","get_alignment_cumsum","alignment_colors","make_color_scheme","aln_breaks","get_alignment_breaks","React","createElement","className","ref","style","onScroll","seriesItem","VirtualHead","label","breaks","height","rescale_series","values","color","VirtualBreaks","seqId","seqIndex","VirtualAlignment","split","Seqselection","enabled","colSpanPre","colSpanPost","childrenCols","Array","i","key","make_series_scale","colSpan","widthPre","widthPost","rowNumber","colors","cumsum","_loop","onClick","_ref","_ref$padding","padding","renderStart","Math","max","floor","renderEnd","min","ceil","breaks_width","arguments","undefined","breaks_rescaled","Fragment","concat","toFixed","scheme","seqIds","aln_length","forEach","_loop2","column","column_colors","color_msa_column","index","push","e","res","_i2","_Object$entries","entries","_Object$entries$_i","val","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","mod","String","_ref2","includedItems","make_sortablejs_items","excludedItems","ReactSortable","group","list","setList","item","l","selected","chosen","filtered","defaultProps","propTypes","PropTypes","string","object","array","func"],"mappings":"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","file":"484e46d-main-wps-hmr.js","sourcesContent":["import React, { useState, useMemo, useRef, useLayoutEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ReactSortable } from 'react-sortablejs';\n\nimport { color_msa_column } from '../msa_color_schemes.js';\nimport './DashSeqaln.react.css';\n\n// NOTE: series values must be scaled between 0 and 1\n\n/**\n * ExampleComponent is an example component.\n */\nexport default function DashSeqaln(props) {\n  const {id, title, alignment, series, included, excluded, color_scheme, setProps} = props;\n  const {allow_sequence_selection = true, show_letters = true, show_seqnum = false, zoom = 10} = props;\n  const alnLength = alignment ? alignment[Object.keys(alignment)[0]].length : 0;\n  const labelRef = useRef();\n  const scaleRef = useRef();\n  const scrollViewportRef = useRef();\n  const [labelWidth, setLabelWidth] = useState(0);\n  const [scaleWidth, setScaleWidth] = useState(0);\n  const [scrollViewportWidth, setScrollViewportWidth] = useState(0);\n  const [highlightedRow, setHighlightedRow] = useState();\n  const [highlightedCol, setHighlightedCol] = useState();\n  const [renderBounds, setRenderBounds] = useState([0, alnLength]);\n  const [ticking, setTicking] = useState(false);\n  useLayoutEffect(() => {\n    const lw = labelRef.current.getBoundingClientRect().width;\n    const sw = scaleRef.current.getBoundingClientRect().width;\n    const svw = scrollViewportRef.current.getBoundingClientRect().width;\n    setLabelWidth(lw);\n    setScaleWidth(sw);\n    setScrollViewportWidth(svw);\n    setRenderBounds(getRenderBounds({\n      scrollLeft: 0,\n      scrollWidth: svw,\n      stickyWidth: lw + sw,\n      alnLength: alnLength,\n      zoom: zoom,\n    }));\n  }, []);\n  // console.log(scrollViewPort.scrollLeft);\n  const setIncluded = (items) => {\n    setProps({included: items.map((x) => x.name)});\n  };\n  const setExcluded = (items) => {\n    setProps({excluded: items.map((x) => x.name)});\n  };\n  const setHighlighted = (row, col) => {\n    setHighlightedRow(row);\n    setHighlightedCol(col);\n    // setProps({highlightedRow: row, highlightedCol: col});\n  };\n  const handleScroll = () => {\n    if (!ticking) {\n      console.log(renderBounds);\n      window.requestAnimationFrame(() => {\n        console.log(scrollViewportRef);\n        setRenderBounds(getRenderBounds({\n          scrollLeft: scrollViewportRef.current.scrollLeft,\n          scrollWidth: scrollViewportWidth,\n          stickyWidth: labelWidth + scaleWidth,\n          alnLength: alnLength,\n          zoom: zoom,\n        }));\n        setTicking(false);\n      });\n      setTicking(true);\n    };\n  };\n  const alignment_cumsum = useMemo(() => get_alignment_cumsum(alignment), [alignment]);\n  const alignment_colors = useMemo(() => make_color_scheme(alignment, color_scheme), [alignment, color_scheme]);\n  const aln_breaks = useMemo(() => get_alignment_breaks(alnLength, 10), [alignment]);\n  return (\n    <div id={id} className=\"DashSeqaln\">\n      {title && (<h2 className=\"title\">{title}</h2>)}\n      <div ref={scrollViewportRef} style={{\"overflowX\": \"auto\"}} onScroll={() => handleScroll()} >\n      <table>\n        {series && series.map((seriesItem) => VirtualHead(seriesItem.label, seriesItem.breaks, seriesItem.height, rescale_series(seriesItem.values, seriesItem.breaks), seriesItem.color, labelWidth, renderBounds) )}\n        <tbody className=\"aln\">\n          {VirtualBreaks(labelRef, scaleRef, aln_breaks, zoom, labelWidth, renderBounds)}\n          {included && included.map((seqId, seqIndex) => VirtualAlignment(seqId, seqIndex, alignment[seqId].split(\"\"), alignment_colors[seqId], alignment_cumsum[seqId], highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds))}\n        </tbody>\n      </table>\n      </div>\n      <Seqselection id={id} included={included} excluded={excluded} setIncluded={setIncluded} setExcluded={setExcluded} enabled={allow_sequence_selection} />\n    </div>\n  );\n}\n\nfunction VirtualHead(label, breaks, height, values, color, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"series-\"+i} className=\"series-values\" style={{\"height\": height || \"100px\"}}>\n        <div style={{\"backgroundColor\": color || \"black\", \"height\": (100 * values[i]) + \"%\", \"position\": \"relative\"}}>\n          <span className=\"series-values-tooltip\">{(i + 1) + \":\" + values[i]}</span>\n        </div>\n      </td>\n    );\n  }\n  return (\n    <thead key={\"series-\"+label} className=\"series\">\n    <tr>\n      <td className=\"series-label\">\n        {label}\n      </td>\n      <td className=\"series-scale\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>\n        {make_series_scale(breaks)}\n      </td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n    <tr><td colSpan={values.length} className=\"series-separator\"></td></tr>\n    </thead>\n  );\n}\n\nfunction VirtualBreaks(labelRef, scaleRef, values, zoom, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  // Each td has a padding of one, so we need `zoom + 2`\n  const widthPre = (zoom + 2) * colSpanPre - 2; // We subtract 2 because two pixels will be added by the padding\n  const widthPost = (zoom + 2) * colSpanPost - 2;\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"aln-axis-resnum-\"+i} className=\"aln-axis-resnum\" >\n        <span style={{\"width\": \"0px\", \"display\": \"block\"}}>{values[i]}</span>\n      </td>\n    );\n  }\n  return (\n    <tr className=\"aln-axis\">\n      <td ref={labelRef} className=\"aln-axis-label\"></td>\n      <td ref={scaleRef} className=\"aln-axis-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}} ></td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre} style={{\"minWidth\": widthPre + \"px\", \"maxWidth\": widthPre + \"px\"}}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost} style={{\"minWidth\": widthPost + \"px\", \"maxWidth\": widthPost + \"px\"}}></td>}\n    </tr>\n  );\n}\n\nfunction VirtualAlignment(label, rowNumber, values, colors, cumsum, highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td\n        key={\"aln-\"+i}\n        className={\"aln-letter\" + (i === highlightedCol ? \" highlighted\" : \"\")}\n        style={{\"backgroundColor\": colors[i], \"minWidth\": zoom + \"px\", \"maxWidth\": zoom + \"px\"}}\n        onClick={() => {setHighlighted(rowNumber, i)}}\n      >\n        {show_letters ? values[i] : \"\"}\n        {values[i] !== \"-\" && (\n          <span className=\"aln-letter-tooltip\">{label + \":\" + cumsum[i]}</span>\n        )}\n      </td>\n    );\n  }\n  return (\n    <tr key={\"aln-\"+label} className={\"aln-row\" + (rowNumber === highlightedRow ? \" highlighted\" : \"\")}>\n      <td className=\"aln-label\">{label}</td>\n      <td className=\"aln-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>{show_seqnum ? rowNumber : \"\"}</td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n  )\n}\n\nfunction getRenderBounds({ scrollLeft, scrollWidth, stickyWidth, alnLength, zoom, padding = 2 }) {\n  // Each td has a padding of one and a width of `zoom`, therefore we need `zoom + 2`\n  console.log(scrollLeft, scrollWidth)\n  const renderStart = Math.max(0, Math.floor(scrollLeft / (zoom + 2)) - padding);\n  const renderEnd = Math.min(alnLength, renderStart + Math.ceil(scrollWidth / (zoom + 2)) + padding);\n  console.log(renderStart, renderEnd)\n  return [0, alnLength];\n  return [renderStart, renderEnd];\n}\n\nfunction rescale_series(values, breaks) {\n  let min = 0, max = 1;\n  if (breaks) {\n    min = breaks[0];\n    max = breaks[breaks.length - 1];\n  }\n  return values.map((x) => (x - min) / (max - min));\n}\n\nfunction make_series_scale(breaks, breaks_width = \"8px\") {\n  // for now we ignore the range and use a default scale for everything\n  if (!breaks) {\n    breaks = [0, 0.5, 1];\n  }\n  let min = breaks[0];\n  let max = breaks[breaks.length - 1];\n  let breaks_rescaled = rescale_series(breaks, breaks);\n  return (\n    <>\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"break-\"+i} style={{\"position\": \"absolute\", \"bottom\": `calc(${x * 100}% - 1px)`, \"width\": breaks_width, \"left\": `calc(100% - ${breaks_width})`, \"borderBottom\": \"0.5px solid black\"}}></div>\n    ))}\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"breaklabel-\"+i} style={{\"position\": \"absolute\", \"bottom\": `${x * 100}%`, \"left\": `calc(100% - ${breaks_width} - 2px)`, \"lineHeight\": \"8px\", \"textAlign\": \"center\", \"transform\": `translate(-100%, ${x * 100}%)`}}>{breaks[i].toFixed(1)}</div>\n    ))}\n    <div style={{\"position\": \"absolute\", \"right\": \"0px\", \"bottom\": \"0px\", \"height\": \"100%\", \"width\": \"1px\", \"backgroundColor\": \"black\"}}></div>\n    </>\n  );\n}\n\nfunction make_color_scheme(alignment, scheme) {\n  try {\n    const seqIds = Object.keys(alignment);\n    const aln_length = alignment[seqIds[0]].length;\n    const colors = {};\n    seqIds.forEach((id) => colors[id] = []);\n    for (let i = 0; i < aln_length; i++) {\n      let column = seqIds.map((id) => alignment[id][i]);\n      let column_colors = color_msa_column(column, scheme);\n      seqIds.forEach((id, index) => colors[id].push(column_colors[index]));\n    }\n    return colors;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_cumsum(alignment) {\n  try {\n    const res = {};\n    for (const [key, val] of Object.entries(alignment)) {\n      res[key] = [];\n      let cumsum = 0;\n      for (let x of val) {\n        cumsum += (x === \"-\" ? 0 : 1);\n        res[key].push(cumsum);\n      }\n    }\n    return res;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_breaks(alnLength, mod) {\n  const aln_breaks = new Array(alnLength);\n  for (let i = 0; i < alnLength; i++) {\n    if (i % mod === 0)\n      aln_breaks[i] = String(i+1);\n    else\n      aln_breaks[i] = \"\";\n  }\n  return aln_breaks;\n}\n\nfunction Seqselection({id, included, excluded, setIncluded, setExcluded, enabled}) {\n  // sortablejs needs items as objects with at least the `id` field.\n  if (!enabled || !included) {\n    return (<></>);\n  }\n  const includedItems = make_sortablejs_items(included);\n  const excludedItems = make_sortablejs_items(excluded);\n  return (\n    <div className=\"seqselection\">\n      <div className=\"seqselection-included\">\n        <h3>Included sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={includedItems} setList={setIncluded} className=\"seqselection-sortable\">\n          {includedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>))}\n        </ReactSortable>\n      </div>\n      <div className=\"seqselection-excluded\">\n        <h3>Excluded sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={excludedItems} setList={setExcluded} className=\"seqselection-sortable\">\n          {excludedItems ?\n            excludedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>)) :\n            <p className=\"seqselection-message\">Drag and drop a sequence ID here to remove it from the alignment.</p>\n          }\n        </ReactSortable>\n      </div>\n    </div>\n  );\n}\n\nfunction make_sortablejs_items(l) {\n  return l.map((item) => ({\n    id: \"sortable-\"+item,\n    selected: false,\n    chosen: false,\n    filtered: false,\n    name: item,\n  }));\n}\n\nDashSeqaln.defaultProps = {};\n\nDashSeqaln.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    title: PropTypes.string,\n\n    /**\n     * An object representing the MSA.\n     */\n    alignment: PropTypes.object,\n\n    /**\n     * List of objects, each containing the data for a bar plot.\n     */\n    series: PropTypes.array,\n\n    /**\n     * The color scheme for the alignment, from Jalview.\n     */\n    color_scheme: PropTypes.string,\n\n    /**\n     * List of sequence IDs to show in the alignment.\n     */\n    included: PropTypes.array,\n\n    /**\n     * List of sequence IDs to NOT show in the alignment.\n     */\n    excluded: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"sourceRoot":""}