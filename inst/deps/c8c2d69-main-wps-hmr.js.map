{"version":3,"sources":["webpack:///./src/lib/components/DashSeqaln.react.js"],"names":["DashSeqaln","props","id","title","alignment","series","included","excluded","color_scheme","setProps","_props$allow_sequence","allow_sequence_selection","_props$show_letters","show_letters","_props$show_seqnum","show_seqnum","_props$zoom","zoom","alnLength","Object","keys","length","labelRef","useRef","_useState","useState","_useState2","_slicedToArray","labelWidth","setLabelWidth","scrollViewportRef","_useState3","_useState4","scrollViewportWidth","setScrollViewportWidth","_useState5","_useState6","highlightedRow","setHighlightedRow","_useState7","_useState8","highlightedCol","setHighlightedCol","_useState9","_useState10","renderBounds","setRenderBounds","_useState11","_useState12","ticking","setTicking","useEffect","lw","current","getBoundingClientRect","width","svw","getRenderBounds","scrollLeft","scrollWidth","setIncluded","items","map","x","name","setExcluded","setHighlighted","row","col","handleScroll","window","requestAnimationFrame","alignment_cumsum","useMemo","get_alignment_cumsum","alignment_colors","make_color_scheme","aln_breaks","get_alignment_breaks","React","createElement","className","ref","style","onScroll","seriesItem","VirtualHead","label","breaks","height","values","color","VirtualBreaks","seqId","seqIndex","VirtualAlignment","Seqselection","enabled","colSpanPre","colSpanPost","childrenCols","Array","i","key","make_series_scale","colSpan","widthPre","widthPost","rowNumber","colors","cumsum","_loop","onClick","getWindowSize","_ref","_ref$padding","padding","Math","ceil","_ref2","_ref2$padding","windowSize","renderStart","max","min","floor","renderEnd","split_alignment","res","_i2","_Object$keys","split","e","rescale_series","seriesId","_i3","_Object$keys2","item","rescale_series_values","breaks_width","arguments","undefined","breaks_rescaled","Fragment","concat","toFixed","scheme","seqIds","aln_length","forEach","_loop2","column","column_colors","color_msa_column","index","push","_i4","_Object$entries","entries","_Object$entries$_i","val","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","mod","String","_ref3","includedItems","make_sortablejs_items","excludedItems","ReactSortable","group","list","setList","l","selected","chosen","filtered","defaultProps","propTypes","PropTypes","string","object","array","func"],"mappings":"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","file":"c8c2d69-main-wps-hmr.js","sourcesContent":["import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ReactSortable } from 'react-sortablejs';\n\nimport { color_msa_column } from '../msa_color_schemes.js';\nimport './DashSeqaln.react.css';\n\n// NOTE: series values must be scaled between 0 and 1\n\n/**\n * ExampleComponent is an example component.\n */\nexport default function DashSeqaln(props) {\n  // Seqaln properties\n  const {id, title, alignment, series, included, excluded, color_scheme, setProps} = props;\n  // Customisation options\n  const {allow_sequence_selection = true, show_letters = true, show_seqnum = false, zoom = 10} = props;\n  const alnLength = alignment ? alignment[Object.keys(alignment)[0]].length : 0;\n  // Ref & state to save the width of the first column (needed to position the second column relatively)\n  const labelRef = useRef();\n  const [labelWidth, setLabelWidth] = useState(0);\n  // Ref & state to save the width of the scrollable area\n  const scrollViewportRef = useRef();\n  const [scrollViewportWidth, setScrollViewportWidth] = useState(0);\n  // Highlighting\n  const [highlightedRow, setHighlightedRow] = useState();\n  const [highlightedCol, setHighlightedCol] = useState();\n  // Rendering params\n  const [renderBounds, setRenderBounds] = useState([0, 0]);\n  const [ticking, setTicking] = useState(false);\n  useEffect(() => {\n    const lw = labelRef.current.getBoundingClientRect().width;\n    const svw = scrollViewportRef.current.getBoundingClientRect().width;\n    setLabelWidth(lw);\n    setScrollViewportWidth(svw);\n    setRenderBounds(getRenderBounds({\n      scrollLeft: 0,\n      scrollWidth: svw,\n      alnLength: alnLength,\n      zoom: zoom,\n    }));\n  }, [labelRef, scrollViewportRef, alnLength, alignment, series, zoom]);\n  const setIncluded = (items) => {\n    setProps({included: items.map((x) => x.name)});\n  };\n  const setExcluded = (items) => {\n    setProps({excluded: items.map((x) => x.name)});\n  };\n  const setHighlighted = (row, col) => {\n    setHighlightedRow(row);\n    setHighlightedCol(col);\n  };\n  const handleScroll = () => {\n    if (!ticking) {\n      setTicking(true);\n      window.requestAnimationFrame(() => {\n        setRenderBounds(getRenderBounds({\n          scrollLeft: scrollViewportRef.current.scrollLeft,\n          scrollWidth: scrollViewportWidth,\n          alnLength: alnLength,\n          zoom: zoom,\n        }));\n        setTicking(false);\n      });\n    }\n  };\n  // Transformed values that don't need to be recomputed every time\n  const alignment_cumsum = useMemo(() => get_alignment_cumsum(alignment), [alignment]);\n  const alignment_colors = useMemo(() => make_color_scheme(alignment, color_scheme), [alignment, color_scheme]);\n  const aln_breaks = useMemo(() => get_alignment_breaks(alnLength, 10), [alignment]);\n  return (\n    <div id={id} className=\"DashSeqaln\">\n      {title && (<h2 className=\"title\">{title}</h2>)}\n      <div ref={scrollViewportRef} style={{\"overflowX\": \"auto\"}} onScroll={() => handleScroll()} >\n      <table>\n        {series && series.map((seriesItem) => VirtualHead(seriesItem.label, seriesItem.breaks, seriesItem.height, seriesItem.values, seriesItem.color, labelWidth, renderBounds) )}\n        <tbody className=\"aln\">\n          {VirtualBreaks(labelRef, aln_breaks, zoom, labelWidth, renderBounds)}\n          {included && included.map((seqId, seqIndex) => VirtualAlignment(seqId, seqIndex, alignment[seqId], alignment_colors[seqId], alignment_cumsum[seqId], highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds))}\n        </tbody>\n      </table>\n      </div>\n      <Seqselection id={id} included={included} excluded={excluded} setIncluded={setIncluded} setExcluded={setExcluded} enabled={allow_sequence_selection} />\n    </div>\n  );\n}\n\nfunction VirtualHead(label, breaks, height, values, color, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"series-\"+i} className=\"series-values\" style={{\"height\": height || \"100px\"}}>\n        <div style={{\"backgroundColor\": color || \"black\", \"height\": (100 * values[i]) + \"%\", \"position\": \"relative\"}}>\n          <span className=\"series-values-tooltip\">{(i + 1) + \":\" + values[i]}</span>\n        </div>\n      </td>\n    );\n  }\n  return (\n    <thead key={\"series-\"+label} className=\"series\">\n    <tr>\n      <td className=\"series-label\">\n        {label}\n      </td>\n      <td className=\"series-scale\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>\n        {make_series_scale(breaks)}\n      </td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n    <tr><td colSpan={values.length} className=\"series-separator\"></td></tr>\n    </thead>\n  );\n}\n\nfunction VirtualBreaks(labelRef, values, zoom, labelWidth, renderBounds) {\n  // NOTE: only this component has the proper colSpanPre and colSpanPost widths becuse we know it's unique.\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  // Each td has a padding of one, so we need `zoom + 2`\n  const widthPre = (zoom + 2) * colSpanPre - 2; // We subtract 2 because two pixels will be added by the padding\n  const widthPost = (zoom + 2) * colSpanPost - 2;\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"aln-axis-resnum-\"+i} className=\"aln-axis-resnum\" >\n        <span style={{\"width\": \"0px\", \"display\": \"block\"}}>{values[i]}</span>\n      </td>\n    );\n  }\n  return (\n    <tr className=\"aln-axis\">\n      <td ref={labelRef} className=\"aln-axis-label\"></td>\n      <td className=\"aln-axis-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}} ></td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre} style={{\"minWidth\": widthPre + \"px\", \"maxWidth\": widthPre + \"px\"}}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost} style={{\"minWidth\": widthPost + \"px\", \"maxWidth\": widthPost + \"px\"}}></td>}\n    </tr>\n  );\n}\n\nfunction VirtualAlignment(label, rowNumber, values, colors, cumsum, highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td\n        key={\"aln-\"+i}\n        className={\"aln-letter\" + (i === highlightedCol ? \" highlighted\" : \"\")}\n        style={{\"backgroundColor\": colors[i], \"minWidth\": zoom + \"px\", \"maxWidth\": zoom + \"px\"}}\n        onClick={() => {setHighlighted(rowNumber, i)}}\n      >\n        {show_letters ? values[i] : \"\"}\n        {values[i] !== \"-\" && (\n          <span className=\"aln-letter-tooltip\">{label + \":\" + cumsum[i]}</span>\n        )}\n      </td>\n    );\n  }\n  return (\n    <tr key={\"aln-\"+label} className={\"aln-row\" + (rowNumber === highlightedRow ? \" highlighted\" : \"\")}>\n      <td className=\"aln-label\">{label}</td>\n      <td className=\"aln-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>{show_seqnum ? rowNumber : \"\"}</td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n  )\n}\n\nfunction getWindowSize({ scrollWidth, zoom, padding = 20 }) {\n  return Math.ceil(scrollWidth / (zoom + 2)) + 2 * padding\n}\n\nfunction getRenderBounds({ scrollLeft, scrollWidth, alnLength, zoom, padding = 20 }) {\n  // Each td has a padding of one and a width of `zoom`, therefore we need `zoom + 2`\n  // the `padding` variable refers to how many columns outside of the view should we render\n  const windowSize = getWindowSize({ scrollWidth: scrollWidth, zoom: zoom, padding: padding })\n  const renderStart = Math.max(0, Math.min(alnLength - windowSize, Math.floor(scrollLeft / (zoom + 2)) - padding));\n  const renderEnd = Math.min(alnLength, renderStart + windowSize);\n  return [renderStart, renderEnd];\n}\n\nfunction split_alignment(alignment) {\n  try {\n    const res = {};\n    for (let seqId of Object.keys(alignment)) {\n      res[seqId] = alignment[seqId].split(\"\");\n    }\n    return res;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction rescale_series(series) {\n  try {\n    const res = new Array(series.length);\n    for (let seriesId in series) {\n      res[seriesId] = {};\n      for (let item of Object.keys(series[seriesId])) {\n        if (item === \"values\") {\n          res[seriesId][item] = rescale_series_values(series[seriesId][item], series[seriesId].breaks);\n        } else {\n          res[seriesId][item] = series[seriesId][item];\n        }\n      }\n    }\n    return res;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction rescale_series_values(values, breaks) {\n  let min = 0, max = 1;\n  if (breaks) {\n    min = breaks[0];\n    max = breaks[breaks.length - 1];\n  }\n  return values.map((x) => (x - min) / (max - min));\n}\n\nfunction make_series_scale(breaks, breaks_width = \"8px\") {\n  // for now we ignore the range and use a default scale for everything\n  if (!breaks) {\n    breaks = [0, 0.5, 1];\n  }\n  let min = breaks[0];\n  let max = breaks[breaks.length - 1];\n  let breaks_rescaled = rescale_series_values(breaks, breaks);\n  return (\n    <>\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"break-\"+i} style={{\"position\": \"absolute\", \"bottom\": `calc(${x * 100}% - 1px)`, \"width\": breaks_width, \"left\": `calc(100% - ${breaks_width})`, \"borderBottom\": \"0.5px solid black\"}}></div>\n    ))}\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"breaklabel-\"+i} style={{\"position\": \"absolute\", \"bottom\": `${x * 100}%`, \"left\": `calc(100% - ${breaks_width} - 2px)`, \"lineHeight\": \"8px\", \"textAlign\": \"center\", \"transform\": `translate(-100%, ${x * 100}%)`}}>{breaks[i].toFixed(1)}</div>\n    ))}\n    <div style={{\"position\": \"absolute\", \"right\": \"0px\", \"bottom\": \"0px\", \"height\": \"100%\", \"width\": \"1px\", \"backgroundColor\": \"black\"}}></div>\n    </>\n  );\n}\n\nfunction make_color_scheme(alignment, scheme) {\n  try {\n    const seqIds = Object.keys(alignment);\n    const aln_length = alignment[seqIds[0]].length;\n    const colors = {};\n    seqIds.forEach((id) => colors[id] = []);\n    for (let i = 0; i < aln_length; i++) {\n      let column = seqIds.map((id) => alignment[id][i]);\n      let column_colors = color_msa_column(column, scheme);\n      seqIds.forEach((id, index) => colors[id].push(column_colors[index]));\n    }\n    return colors;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_cumsum(alignment) {\n  try {\n    const res = {};\n    for (const [key, val] of Object.entries(alignment)) {\n      res[key] = [];\n      let cumsum = 0;\n      for (let x of val) {\n        cumsum += (x === \"-\" ? 0 : 1);\n        res[key].push(cumsum);\n      }\n    }\n    return res;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_breaks(alnLength, mod) {\n  const aln_breaks = new Array(alnLength);\n  for (let i = 0; i < alnLength; i++) {\n    if (i % mod === 0)\n      aln_breaks[i] = String(i+1);\n    else\n      aln_breaks[i] = \"\";\n  }\n  return aln_breaks;\n}\n\nfunction Seqselection({id, included, excluded, setIncluded, setExcluded, enabled}) {\n  // sortablejs needs items as objects with at least the `id` field.\n  if (!enabled || !included) {\n    return (<></>);\n  }\n  const includedItems = make_sortablejs_items(included);\n  const excludedItems = make_sortablejs_items(excluded);\n  return (\n    <div className=\"seqselection\">\n      <div className=\"seqselection-included\">\n        <h3>Included sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={includedItems} setList={setIncluded} className=\"seqselection-sortable\">\n          {includedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>))}\n        </ReactSortable>\n      </div>\n      <div className=\"seqselection-excluded\">\n        <h3>Excluded sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={excludedItems} setList={setExcluded} className=\"seqselection-sortable\">\n          {excludedItems ?\n            excludedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>)) :\n            <p className=\"seqselection-message\">Drag and drop a sequence ID here to remove it from the alignment.</p>\n          }\n        </ReactSortable>\n      </div>\n    </div>\n  );\n}\n\nfunction make_sortablejs_items(l) {\n  return l.map((item) => ({\n    id: \"sortable-\"+item,\n    selected: false,\n    chosen: false,\n    filtered: false,\n    name: item,\n  }));\n}\n\nDashSeqaln.defaultProps = {};\n\nDashSeqaln.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    title: PropTypes.string,\n\n    /**\n     * An object representing the MSA.\n     */\n    alignment: PropTypes.object,\n\n    /**\n     * List of objects, each containing the data for a bar plot.\n     */\n    series: PropTypes.array,\n\n    /**\n     * The color scheme for the alignment, from Jalview.\n     */\n    color_scheme: PropTypes.string,\n\n    /**\n     * List of sequence IDs to show in the alignment.\n     */\n    included: PropTypes.array,\n\n    /**\n     * List of sequence IDs to NOT show in the alignment.\n     */\n    excluded: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"sourceRoot":""}