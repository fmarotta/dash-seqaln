{"version":3,"sources":["webpack:///./src/lib/components/DashSeqaln.react.js"],"names":["DashSeqaln","props","id","title","alignment","series","included","excluded","color_scheme","setProps","_props$allow_sequence","allow_sequence_selection","_props$show_letters","show_letters","_props$show_seqnum","show_seqnum","_props$zoom","zoom","alnLength","Object","keys","length","labelRef","useRef","scrollViewportRef","_useState","useState","_useState2","_slicedToArray","labelWidth","setLabelWidth","_useState3","_useState4","scrollViewportWidth","setScrollViewportWidth","_useState5","_useState6","highlightedRow","setHighlightedRow","_useState7","_useState8","highlightedCol","setHighlightedCol","_useState9","_useState10","renderBounds","setRenderBounds","_useState11","_useState12","ticking","setTicking","breaksWindow","useMemo","Array","getWindowSize","scrollWidth","padding","useEffect","lw","current","getBoundingClientRect","width","svw","getRenderBounds","scrollLeft","setIncluded","items","map","x","name","setExcluded","setHighlighted","row","col","handleScroll","window","requestAnimationFrame","alignment_cumsum","get_alignment_cumsum","alignment_colors","make_color_scheme","aln_breaks","get_alignment_breaks","React","createElement","className","ref","style","onScroll","seriesItem","VirtualHead","label","breaks","height","rescale_series","values","color","VirtualBreaks","seqId","seqIndex","VirtualAlignment","split","Seqselection","enabled","colSpanPre","colSpanPost","childrenCols","i","key","make_series_scale","colSpan","widthPre","widthPost","rowNumber","colors","cumsum","_loop","onClick","_ref","_ref$padding","Math","ceil","_ref2","_ref2$padding","renderStart","max","floor","renderEnd","min","breaks_width","arguments","undefined","breaks_rescaled","Fragment","concat","toFixed","scheme","seqIds","aln_length","forEach","_loop2","column","column_colors","color_msa_column","index","push","e","res","_i2","_Object$entries","entries","_Object$entries$_i","val","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","mod","String","_ref3","includedItems","make_sortablejs_items","excludedItems","ReactSortable","group","list","setList","item","l","selected","chosen","filtered","defaultProps","propTypes","PropTypes","string","object","array","func"],"mappings":"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","file":"423b9df-main-wps-hmr.js","sourcesContent":["import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ReactSortable } from 'react-sortablejs';\n\nimport { color_msa_column } from '../msa_color_schemes.js';\nimport './DashSeqaln.react.css';\n\n// NOTE: series values must be scaled between 0 and 1\n\n/**\n * ExampleComponent is an example component.\n */\nexport default function DashSeqaln(props) {\n  const {id, title, alignment, series, included, excluded, color_scheme, setProps} = props;\n  const {allow_sequence_selection = true, show_letters = true, show_seqnum = false, zoom = 10} = props;\n  const alnLength = alignment ? alignment[Object.keys(alignment)[0]].length : 0;\n  const labelRef = useRef();\n  const scrollViewportRef = useRef();\n  const [labelWidth, setLabelWidth] = useState(0);\n  const [scrollViewportWidth, setScrollViewportWidth] = useState(0);\n  const [highlightedRow, setHighlightedRow] = useState();\n  const [highlightedCol, setHighlightedCol] = useState();\n  const [renderBounds, setRenderBounds] = useState([0, 0]);\n  const [ticking, setTicking] = useState(false);\n  const breaksWindow = useMemo(new Array(getWindowSize({ scrollWidth: scrollViewportWidth, zoom: zoom, padding: 2 })), [zoom, alignment, series, scrollViewportWidth]);\n  useEffect(() => {\n    const lw = labelRef.current.getBoundingClientRect().width;\n    const svw = scrollViewportRef.current.getBoundingClientRect().width;\n    setLabelWidth(lw);\n    setScrollViewportWidth(svw);\n    setRenderBounds(getRenderBounds({\n      scrollLeft: 0,\n      scrollWidth: svw,\n      alnLength: alnLength,\n      zoom: zoom,\n    }));\n  }, [labelRef, scrollViewportRef, alnLength, zoom]);\n  const setIncluded = (items) => {\n    setProps({included: items.map((x) => x.name)});\n  };\n  const setExcluded = (items) => {\n    setProps({excluded: items.map((x) => x.name)});\n  };\n  const setHighlighted = (row, col) => {\n    setHighlightedRow(row);\n    setHighlightedCol(col);\n    // setProps({highlightedRow: row, highlightedCol: col});\n  };\n  const handleScroll = () => {\n    if (!ticking) {\n      setTicking(true);\n      window.requestAnimationFrame(() => {\n        setRenderBounds(getRenderBounds({\n          scrollLeft: scrollViewportRef.current.scrollLeft,\n          scrollWidth: scrollViewportWidth,\n          alnLength: alnLength,\n          zoom: zoom,\n        }));\n        setTicking(false);\n      });\n    }\n  };\n  const alignment_cumsum = useMemo(() => get_alignment_cumsum(alignment), [alignment]);\n  const alignment_colors = useMemo(() => make_color_scheme(alignment, color_scheme), [alignment, color_scheme]);\n  const aln_breaks = useMemo(() => get_alignment_breaks(alnLength, 10), [alignment]);\n  return (\n    <div id={id} className=\"DashSeqaln\">\n      {title && (<h2 className=\"title\">{title}</h2>)}\n      <div ref={scrollViewportRef} style={{\"overflowX\": \"auto\"}} onScroll={() => handleScroll()} >\n      <table>\n        {series && series.map((seriesItem) => VirtualHead(seriesItem.label, seriesItem.breaks, seriesItem.height, rescale_series(seriesItem.values, seriesItem.breaks), seriesItem.color, labelWidth, renderBounds) )}\n        <tbody className=\"aln\">\n          {VirtualBreaks(labelRef, aln_breaks, zoom, labelWidth, renderBounds, breaksWindow)}\n          {included && included.map((seqId, seqIndex) => VirtualAlignment(seqId, seqIndex, alignment[seqId].split(\"\"), alignment_colors[seqId], alignment_cumsum[seqId], highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds))}\n        </tbody>\n      </table>\n      </div>\n      <Seqselection id={id} included={included} excluded={excluded} setIncluded={setIncluded} setExcluded={setExcluded} enabled={allow_sequence_selection} />\n    </div>\n  );\n}\n\nfunction VirtualHead(label, breaks, height, values, color, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"series-\"+i} className=\"series-values\" style={{\"height\": height || \"100px\"}}>\n        <div style={{\"backgroundColor\": color || \"black\", \"height\": (100 * values[i]) + \"%\", \"position\": \"relative\"}}>\n          <span className=\"series-values-tooltip\">{(i + 1) + \":\" + values[i]}</span>\n        </div>\n      </td>\n    );\n  }\n  return (\n    <thead key={\"series-\"+label} className=\"series\">\n    <tr>\n      <td className=\"series-label\">\n        {label}\n      </td>\n      <td className=\"series-scale\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>\n        {make_series_scale(breaks)}\n      </td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n    <tr><td colSpan={values.length} className=\"series-separator\"></td></tr>\n    </thead>\n  );\n}\n\nfunction VirtualBreaks(labelRef, values, zoom, labelWidth, renderBounds, breaksWindow) {\n  // NOTE: only this component has the proper colSpanPre and colSpanPost widths becuse we know it's unique.\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  // Each td has a padding of one, so we need `zoom + 2`\n  const widthPre = (zoom + 2) * colSpanPre - 2; // We subtract 2 because two pixels will be added by the padding\n  const widthPost = (zoom + 2) * colSpanPost - 2;\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"aln-axis-resnum-\"+i} className=\"aln-axis-resnum\" >\n        <span style={{\"width\": \"0px\", \"display\": \"block\"}}>{values[i]}</span>\n      </td>\n    );\n  }\n  return (\n    <tr className=\"aln-axis\">\n      <td ref={labelRef} className=\"aln-axis-label\"></td>\n      <td className=\"aln-axis-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}} ></td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre} style={{\"minWidth\": widthPre + \"px\", \"maxWidth\": widthPre + \"px\"}}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost} style={{\"minWidth\": widthPost + \"px\", \"maxWidth\": widthPost + \"px\"}}></td>}\n    </tr>\n  );\n}\n\nfunction VirtualAlignment(label, rowNumber, values, colors, cumsum, highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td\n        key={\"aln-\"+i}\n        className={\"aln-letter\" + (i === highlightedCol ? \" highlighted\" : \"\")}\n        style={{\"backgroundColor\": colors[i], \"minWidth\": zoom + \"px\", \"maxWidth\": zoom + \"px\"}}\n        onClick={() => {setHighlighted(rowNumber, i)}}\n      >\n        {show_letters ? values[i] : \"\"}\n        {values[i] !== \"-\" && (\n          <span className=\"aln-letter-tooltip\">{label + \":\" + cumsum[i]}</span>\n        )}\n      </td>\n    );\n  }\n  return (\n    <tr key={\"aln-\"+label} className={\"aln-row\" + (rowNumber === highlightedRow ? \" highlighted\" : \"\")}>\n      <td className=\"aln-label\">{label}</td>\n      <td className=\"aln-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>{show_seqnum ? rowNumber : \"\"}</td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n  )\n}\n\nfunction getWindowSize({ scrollWidth, zoom, padding = 2 }) {\n  Math.ceil(scrollWidth / (zoom + 2)) + 2 * padding\n}\n\nfunction getRenderBounds({ scrollLeft, scrollWidth, alnLength, zoom, padding = 2 }) {\n  // Each td has a padding of one and a width of `zoom`, therefore we need `zoom + 2`\n  // the `padding` variable refers to how many columns outside of the view should we render\n  const renderStart = Math.max(0, Math.floor(scrollLeft / (zoom + 2)) - padding);\n  const renderEnd = Math.min(alnLength, renderStart + getWindowSize({ scrollWidth: scrollWidth, zoom: zoom, padding: padding }));\n  return [renderStart, renderEnd];\n}\n\nfunction rescale_series(values, breaks) {\n  let min = 0, max = 1;\n  if (breaks) {\n    min = breaks[0];\n    max = breaks[breaks.length - 1];\n  }\n  return values.map((x) => (x - min) / (max - min));\n}\n\nfunction make_series_scale(breaks, breaks_width = \"8px\") {\n  // for now we ignore the range and use a default scale for everything\n  if (!breaks) {\n    breaks = [0, 0.5, 1];\n  }\n  let min = breaks[0];\n  let max = breaks[breaks.length - 1];\n  let breaks_rescaled = rescale_series(breaks, breaks);\n  return (\n    <>\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"break-\"+i} style={{\"position\": \"absolute\", \"bottom\": `calc(${x * 100}% - 1px)`, \"width\": breaks_width, \"left\": `calc(100% - ${breaks_width})`, \"borderBottom\": \"0.5px solid black\"}}></div>\n    ))}\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"breaklabel-\"+i} style={{\"position\": \"absolute\", \"bottom\": `${x * 100}%`, \"left\": `calc(100% - ${breaks_width} - 2px)`, \"lineHeight\": \"8px\", \"textAlign\": \"center\", \"transform\": `translate(-100%, ${x * 100}%)`}}>{breaks[i].toFixed(1)}</div>\n    ))}\n    <div style={{\"position\": \"absolute\", \"right\": \"0px\", \"bottom\": \"0px\", \"height\": \"100%\", \"width\": \"1px\", \"backgroundColor\": \"black\"}}></div>\n    </>\n  );\n}\n\nfunction make_color_scheme(alignment, scheme) {\n  try {\n    const seqIds = Object.keys(alignment);\n    const aln_length = alignment[seqIds[0]].length;\n    const colors = {};\n    seqIds.forEach((id) => colors[id] = []);\n    for (let i = 0; i < aln_length; i++) {\n      let column = seqIds.map((id) => alignment[id][i]);\n      let column_colors = color_msa_column(column, scheme);\n      seqIds.forEach((id, index) => colors[id].push(column_colors[index]));\n    }\n    return colors;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_cumsum(alignment) {\n  try {\n    const res = {};\n    for (const [key, val] of Object.entries(alignment)) {\n      res[key] = [];\n      let cumsum = 0;\n      for (let x of val) {\n        cumsum += (x === \"-\" ? 0 : 1);\n        res[key].push(cumsum);\n      }\n    }\n    return res;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_breaks(alnLength, mod) {\n  const aln_breaks = new Array(alnLength);\n  for (let i = 0; i < alnLength; i++) {\n    if (i % mod === 0)\n      aln_breaks[i] = String(i+1);\n    else\n      aln_breaks[i] = \"\";\n  }\n  return aln_breaks;\n}\n\nfunction Seqselection({id, included, excluded, setIncluded, setExcluded, enabled}) {\n  // sortablejs needs items as objects with at least the `id` field.\n  if (!enabled || !included) {\n    return (<></>);\n  }\n  const includedItems = make_sortablejs_items(included);\n  const excludedItems = make_sortablejs_items(excluded);\n  return (\n    <div className=\"seqselection\">\n      <div className=\"seqselection-included\">\n        <h3>Included sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={includedItems} setList={setIncluded} className=\"seqselection-sortable\">\n          {includedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>))}\n        </ReactSortable>\n      </div>\n      <div className=\"seqselection-excluded\">\n        <h3>Excluded sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={excludedItems} setList={setExcluded} className=\"seqselection-sortable\">\n          {excludedItems ?\n            excludedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>)) :\n            <p className=\"seqselection-message\">Drag and drop a sequence ID here to remove it from the alignment.</p>\n          }\n        </ReactSortable>\n      </div>\n    </div>\n  );\n}\n\nfunction make_sortablejs_items(l) {\n  return l.map((item) => ({\n    id: \"sortable-\"+item,\n    selected: false,\n    chosen: false,\n    filtered: false,\n    name: item,\n  }));\n}\n\nDashSeqaln.defaultProps = {};\n\nDashSeqaln.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    title: PropTypes.string,\n\n    /**\n     * An object representing the MSA.\n     */\n    alignment: PropTypes.object,\n\n    /**\n     * List of objects, each containing the data for a bar plot.\n     */\n    series: PropTypes.array,\n\n    /**\n     * The color scheme for the alignment, from Jalview.\n     */\n    color_scheme: PropTypes.string,\n\n    /**\n     * List of sequence IDs to show in the alignment.\n     */\n    included: PropTypes.array,\n\n    /**\n     * List of sequence IDs to NOT show in the alignment.\n     */\n    excluded: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"sourceRoot":""}