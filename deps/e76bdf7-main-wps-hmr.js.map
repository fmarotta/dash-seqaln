{"version":3,"sources":["webpack:///./src/lib/components/DashSeqaln.react.js"],"names":["listdiff","l1","l2","filter","x","includes","make_sortablejs_items","l","map","item","id","selected","chosen","filtered","name","DashSeqaln","props","title","aln","included","excluded","series","setProps","includedItems","excludedItems","setIncluded","items","setExcluded","React","createElement","className","Object","keys","label","key","height","index","style","colSpan","seqItem","split","letter","ReactSortable","group","list","setList","defaultProps","propTypes","PropTypes","string","isRequired","object","array","func"],"mappings":"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","file":"e76bdf7-main-wps-hmr.js","sourcesContent":["/**\n * TODO:\n * color the msa\n * support clicking rows or cols\n * scale the height of the histograms between a and b\n */\n\nimport React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { ReactSortable } from 'react-sortablejs';\nimport './DashSeqaln.react.css';\n\nfunction listdiff(l1, l2) {\n  return l1.filter((x) => !l2.includes(x));\n}\n\nfunction make_sortablejs_items(l) {\n  return l.map((item) => ({\n    id: \"sortable-\"+item,\n    selected: false,\n    chosen: false,\n    filtered: false,\n    name: item,\n  }));\n}\n\n/**\n * ExampleComponent is an example component.\n */\nexport default function DashSeqaln(props) {\n  const {id, title, aln, included, excluded, series, setProps} = props;\n  // sortablejs needs items as objects with at least the `id` field.\n  const includedItems = make_sortablejs_items(included);\n  const excludedItems = make_sortablejs_items(excluded);\n  const setIncluded = (items) => {\n    setProps({included: items.map((x) => x.name)});\n  };\n  const setExcluded = (items) => {\n    setProps({excluded: items.map((x) => x.name)});\n  };\n  return (\n    <div id={id} className=\"DashSeqaln\">\n      <h2>{title}</h2>\n      <table>\n        {Object.keys(series).map((label) => (\n          <thead key={\"series-\"+label}>\n          <tr>\n            <td className=\"series-label\">{label}</td>\n            {series[label].map((height, index) => (\n              <td key={\"series-\"+index}>\n                <div style={{\"backgroundColor\": \"red\", \"height\": 100 * height}}></div>\n              </td>\n            ))}\n          </tr>\n          <tr><td colSpan=\"100%\"><hr style={{\"margin\": \"0px\", \"border\": \"dashed 1px lightGray\"}}></hr></td></tr>\n          </thead>\n        ))}\n      <tbody>\n        {included.map((seqItem) => (\n          <tr key={\"aln-\"+seqItem}>\n            <td className=\"aln-label\">{seqItem}</td>\n            {aln[seqItem].split(\"\").map((letter, index) => (\n              <td key={\"aln-\"+index}>{letter}</td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n      </table>\n      <div className=\"DashSeqaln-select\">\n        <div className=\"DashSeqaln-included\">\n          <h3>Included sequences</h3>\n          <ReactSortable group={\"DashSeqaln-\"+id} list={includedItems} setList={setIncluded} className=\"Sortable\">\n            {includedItems.map((item) => (<div key={item.id} className=\"SortableItem\">{item.name}</div>))}\n          </ReactSortable>\n        </div>\n        <div className=\"DashSeqaln-excluded\">\n          <h3>Excluded sequences</h3>\n          <ReactSortable group={\"DashSeqaln-\"+id} list={excludedItems} setList={setExcluded} className=\"Sortable\">\n            {excludedItems.map((item) => (<div key={item.id} className=\"SortableItem\">{item.name}</div>))}\n          </ReactSortable>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nDashSeqaln.defaultProps = {};\n\nDashSeqaln.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    title: PropTypes.string.isRequired,\n\n    /**\n     * An object containing the MSA as strings.\n     */\n    aln: PropTypes.object,\n\n    /**\n     * Object of numeric lists for the bar plots.\n     */\n    series: PropTypes.object,\n\n    /**\n     * List of sequence IDs to show in the alignment.\n     */\n    included: PropTypes.array,\n\n    /**\n     * List of sequence IDs to NOT show in the alignment.\n     */\n    excluded: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"sourceRoot":""}