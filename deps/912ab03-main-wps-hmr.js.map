{"version":3,"sources":["webpack:///./src/lib/components/DashSeqaln.react.js"],"names":["DashSeqaln","props","id","title","alignment","series","included","excluded","color_scheme","setProps","_props$allow_sequence","allow_sequence_selection","_props$show_letters","show_letters","_props$show_seqnum","show_seqnum","_props$zoom","zoom","alnLength","Object","keys","length","labelRef","useRef","_useState","useState","_useState2","_slicedToArray","labelWidth","setLabelWidth","scrollViewportRef","_useState3","_useState4","scrollViewportWidth","setScrollViewportWidth","_useState5","_useState6","highlightedRow","setHighlightedRow","_useState7","_useState8","highlightedCol","setHighlightedCol","_useState9","_useState10","renderBounds","setRenderBounds","_useState11","_useState12","ticking","setTicking","useEffect","lw","current","getBoundingClientRect","width","svw","getRenderBounds","scrollLeft","scrollWidth","setIncluded","items","map","x","name","setExcluded","setHighlighted","row","col","handleScroll","window","requestAnimationFrame","alignment_cumsum","useMemo","get_alignment_cumsum","alignment_colors","make_color_scheme","aln_breaks","get_alignment_breaks","breaksWindow","Array","getWindowSize","padding","React","createElement","className","ref","style","onScroll","seriesItem","VirtualHead","label","breaks","height","rescale_series","values","color","VirtualBreaks","seqId","seqIndex","VirtualAlignment","split","Seqselection","enabled","colSpanPre","colSpanPost","childrenCols","i","key","make_series_scale","colSpan","widthPre","widthPost","rowNumber","colors","cumsum","_loop","onClick","_ref","_ref$padding","Math","ceil","_ref2","_ref2$padding","windowSize","renderStart","max","min","floor","renderEnd","breaks_width","arguments","undefined","breaks_rescaled","Fragment","concat","toFixed","scheme","seqIds","aln_length","forEach","_loop2","column","column_colors","color_msa_column","index","push","e","res","_i2","_Object$entries","entries","_Object$entries$_i","val","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","mod","String","_ref3","includedItems","make_sortablejs_items","excludedItems","ReactSortable","group","list","setList","item","l","selected","chosen","filtered","defaultProps","propTypes","PropTypes","string","object","array","func"],"mappings":"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","file":"912ab03-main-wps-hmr.js","sourcesContent":["import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { ReactSortable } from 'react-sortablejs';\n\nimport { color_msa_column } from '../msa_color_schemes.js';\nimport './DashSeqaln.react.css';\n\n// NOTE: series values must be scaled between 0 and 1\n\n/**\n * ExampleComponent is an example component.\n */\nexport default function DashSeqaln(props) {\n  // Seqaln properties\n  const {id, title, alignment, series, included, excluded, color_scheme, setProps} = props;\n  // Customisation options\n  const {allow_sequence_selection = true, show_letters = true, show_seqnum = false, zoom = 10} = props;\n  const alnLength = alignment ? alignment[Object.keys(alignment)[0]].length : 0;\n  // Ref & state to save the width of the first column (needed to position the second column relatively)\n  const labelRef = useRef();\n  const [labelWidth, setLabelWidth] = useState(0);\n  // Ref & state to save the width of the scrollable area\n  const scrollViewportRef = useRef();\n  const [scrollViewportWidth, setScrollViewportWidth] = useState(0);\n  // Highlighting\n  const [highlightedRow, setHighlightedRow] = useState();\n  const [highlightedCol, setHighlightedCol] = useState();\n  // Rendering params\n  const [renderBounds, setRenderBounds] = useState([0, 0]);\n  const [ticking, setTicking] = useState(false);\n  useEffect(() => {\n    const lw = labelRef.current.getBoundingClientRect().width;\n    const svw = scrollViewportRef.current.getBoundingClientRect().width;\n    setLabelWidth(lw);\n    setScrollViewportWidth(svw);\n    setRenderBounds(getRenderBounds({\n      scrollLeft: 0,\n      scrollWidth: svw,\n      alnLength: alnLength,\n      zoom: zoom,\n    }));\n  }, [labelRef, scrollViewportRef, alnLength, alignment, series, zoom]);\n  const setIncluded = (items) => {\n    setProps({included: items.map((x) => x.name)});\n  };\n  const setExcluded = (items) => {\n    setProps({excluded: items.map((x) => x.name)});\n  };\n  const setHighlighted = (row, col) => {\n    setHighlightedRow(row);\n    setHighlightedCol(col);\n  };\n  const handleScroll = () => {\n    if (!ticking) {\n      setTicking(true);\n      window.requestAnimationFrame(() => {\n        setRenderBounds(getRenderBounds({\n          scrollLeft: scrollViewportRef.current.scrollLeft,\n          scrollWidth: scrollViewportWidth,\n          alnLength: alnLength,\n          zoom: zoom,\n        }));\n        setTicking(false);\n      });\n    }\n  };\n  // Transformed values that don't need to be recomputed every time\n  const alignment_cumsum = useMemo(() => get_alignment_cumsum(alignment), [alignment]);\n  const alignment_colors = useMemo(() => make_color_scheme(alignment, color_scheme), [alignment, color_scheme]);\n  const aln_breaks = useMemo(() => get_alignment_breaks(alnLength, 10), [alignment]);\n  // Array of fixed size; will contain all the visible values for the alignment breaks\n  const breaksWindow = useMemo(() => new Array(getWindowSize({ scrollWidth: scrollViewportWidth, zoom: zoom, padding: 2 })), [zoom, alignment, series, scrollViewportWidth]);\n  return (\n    <div id={id} className=\"DashSeqaln\">\n      {title && (<h2 className=\"title\">{title}</h2>)}\n      <div ref={scrollViewportRef} style={{\"overflowX\": \"auto\"}} onScroll={() => handleScroll()} >\n      <table>\n        {series && series.map((seriesItem) => VirtualHead(seriesItem.label, seriesItem.breaks, seriesItem.height, rescale_series(seriesItem.values, seriesItem.breaks), seriesItem.color, labelWidth, renderBounds) )}\n        <tbody className=\"aln\">\n          {VirtualBreaks(labelRef, aln_breaks, zoom, labelWidth, renderBounds, breaksWindow)}\n          {included && included.map((seqId, seqIndex) => VirtualAlignment(seqId, seqIndex, alignment[seqId].split(\"\"), alignment_colors[seqId], alignment_cumsum[seqId], highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds))}\n        </tbody>\n      </table>\n      </div>\n      <Seqselection id={id} included={included} excluded={excluded} setIncluded={setIncluded} setExcluded={setExcluded} enabled={allow_sequence_selection} />\n    </div>\n  );\n}\n\nfunction VirtualHead(label, breaks, height, values, color, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td key={\"series-\"+i} className=\"series-values\" style={{\"height\": height || \"100px\"}}>\n        <div style={{\"backgroundColor\": color || \"black\", \"height\": (100 * values[i]) + \"%\", \"position\": \"relative\"}}>\n          <span className=\"series-values-tooltip\">{(i + 1) + \":\" + values[i]}</span>\n        </div>\n      </td>\n    );\n  }\n  return (\n    <thead key={\"series-\"+label} className=\"series\">\n    <tr>\n      <td className=\"series-label\">\n        {label}\n      </td>\n      <td className=\"series-scale\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>\n        {make_series_scale(breaks)}\n      </td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n    <tr><td colSpan={values.length} className=\"series-separator\"></td></tr>\n    </thead>\n  );\n}\n\nfunction VirtualBreaks(labelRef, values, zoom, labelWidth, renderBounds, breaksWindow) {\n  // NOTE: only this component has the proper colSpanPre and colSpanPost widths becuse we know it's unique.\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  // Each td has a padding of one, so we need `zoom + 2`\n  const widthPre = (zoom + 2) * colSpanPre - 2; // We subtract 2 because two pixels will be added by the padding\n  const widthPost = (zoom + 2) * colSpanPost - 2;\n  // const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    breaksWindow[i - renderBounds[0]] = (\n      <td key={\"aln-axis-resnum-\"+i} className=\"aln-axis-resnum\" >\n        <span style={{\"width\": \"0px\", \"display\": \"block\"}}>{values[i]}</span>\n      </td>\n    );\n  }\n  return (\n    <tr className=\"aln-axis\">\n      <td ref={labelRef} className=\"aln-axis-label\"></td>\n      <td className=\"aln-axis-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}} ></td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre} style={{\"minWidth\": widthPre + \"px\", \"maxWidth\": widthPre + \"px\"}}></td>}\n      {breaksWindow}\n      {colSpanPost > 0 && <td colSpan={colSpanPost} style={{\"minWidth\": widthPost + \"px\", \"maxWidth\": widthPost + \"px\"}}></td>}\n    </tr>\n  );\n}\n\nfunction VirtualAlignment(label, rowNumber, values, colors, cumsum, highlightedRow, highlightedCol, show_seqnum, show_letters, zoom, labelWidth, renderBounds) {\n  const colSpanPre = renderBounds[0];\n  const colSpanPost = values.length - renderBounds[1];\n  const childrenCols = new Array(renderBounds[1] - renderBounds[0]);\n  for (let i = renderBounds[0]; i < renderBounds[1]; ++i) {\n    childrenCols[i - renderBounds[0]] = (\n      <td\n        key={\"aln-\"+i}\n        className={\"aln-letter\" + (i === highlightedCol ? \" highlighted\" : \"\")}\n        style={{\"backgroundColor\": colors[i], \"minWidth\": zoom + \"px\", \"maxWidth\": zoom + \"px\"}}\n        onClick={() => {setHighlighted(rowNumber, i)}}\n      >\n        {show_letters ? values[i] : \"\"}\n        {values[i] !== \"-\" && (\n          <span className=\"aln-letter-tooltip\">{label + \":\" + cumsum[i]}</span>\n        )}\n      </td>\n    );\n  }\n  return (\n    <tr key={\"aln-\"+label} className={\"aln-row\" + (rowNumber === highlightedRow ? \" highlighted\" : \"\")}>\n      <td className=\"aln-label\">{label}</td>\n      <td className=\"aln-seqnum\" style={{\"position\": \"sticky\", \"left\": labelWidth}}>{show_seqnum ? rowNumber : \"\"}</td>\n      {colSpanPre > 0 && <td colSpan={colSpanPre}></td>}\n      {childrenCols}\n      {colSpanPost > 0 && <td colSpan={colSpanPost}></td>}\n    </tr>\n  )\n}\n\nfunction getWindowSize({ scrollWidth, zoom, padding = 2 }) {\n  return Math.ceil(scrollWidth / (zoom + 2)) + 2 * padding\n}\n\nfunction getRenderBounds({ scrollLeft, scrollWidth, alnLength, zoom, padding = 2 }) {\n  // Each td has a padding of one and a width of `zoom`, therefore we need `zoom + 2`\n  // the `padding` variable refers to how many columns outside of the view should we render\n  const windowSize = getWindowSize({ scrollWidth: scrollWidth, zoom: zoom, padding: padding })\n  const renderStart = Math.max(0, Math.min(alnLength - windowSize, Math.floor(scrollLeft / (zoom + 2)) - padding));\n  const renderEnd = Math.min(alnLength, renderStart + windowSize);\n  return [renderStart, renderEnd];\n}\n\nfunction rescale_series(values, breaks) {\n  let min = 0, max = 1;\n  if (breaks) {\n    min = breaks[0];\n    max = breaks[breaks.length - 1];\n  }\n  return values.map((x) => (x - min) / (max - min));\n}\n\nfunction make_series_scale(breaks, breaks_width = \"8px\") {\n  // for now we ignore the range and use a default scale for everything\n  if (!breaks) {\n    breaks = [0, 0.5, 1];\n  }\n  let min = breaks[0];\n  let max = breaks[breaks.length - 1];\n  let breaks_rescaled = rescale_series(breaks, breaks);\n  return (\n    <>\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"break-\"+i} style={{\"position\": \"absolute\", \"bottom\": `calc(${x * 100}% - 1px)`, \"width\": breaks_width, \"left\": `calc(100% - ${breaks_width})`, \"borderBottom\": \"0.5px solid black\"}}></div>\n    ))}\n    {breaks_rescaled.map((x, i) => (\n      <div key={\"breaklabel-\"+i} style={{\"position\": \"absolute\", \"bottom\": `${x * 100}%`, \"left\": `calc(100% - ${breaks_width} - 2px)`, \"lineHeight\": \"8px\", \"textAlign\": \"center\", \"transform\": `translate(-100%, ${x * 100}%)`}}>{breaks[i].toFixed(1)}</div>\n    ))}\n    <div style={{\"position\": \"absolute\", \"right\": \"0px\", \"bottom\": \"0px\", \"height\": \"100%\", \"width\": \"1px\", \"backgroundColor\": \"black\"}}></div>\n    </>\n  );\n}\n\nfunction make_color_scheme(alignment, scheme) {\n  try {\n    const seqIds = Object.keys(alignment);\n    const aln_length = alignment[seqIds[0]].length;\n    const colors = {};\n    seqIds.forEach((id) => colors[id] = []);\n    for (let i = 0; i < aln_length; i++) {\n      let column = seqIds.map((id) => alignment[id][i]);\n      let column_colors = color_msa_column(column, scheme);\n      seqIds.forEach((id, index) => colors[id].push(column_colors[index]));\n    }\n    return colors;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_cumsum(alignment) {\n  try {\n    const res = {};\n    for (const [key, val] of Object.entries(alignment)) {\n      res[key] = [];\n      let cumsum = 0;\n      for (let x of val) {\n        cumsum += (x === \"-\" ? 0 : 1);\n        res[key].push(cumsum);\n      }\n    }\n    return res;\n  } catch(e) {\n    return null;\n  }\n}\n\nfunction get_alignment_breaks(alnLength, mod) {\n  const aln_breaks = new Array(alnLength);\n  for (let i = 0; i < alnLength; i++) {\n    if (i % mod === 0)\n      aln_breaks[i] = String(i+1);\n    else\n      aln_breaks[i] = \"\";\n  }\n  return aln_breaks;\n}\n\nfunction Seqselection({id, included, excluded, setIncluded, setExcluded, enabled}) {\n  // sortablejs needs items as objects with at least the `id` field.\n  if (!enabled || !included) {\n    return (<></>);\n  }\n  const includedItems = make_sortablejs_items(included);\n  const excludedItems = make_sortablejs_items(excluded);\n  return (\n    <div className=\"seqselection\">\n      <div className=\"seqselection-included\">\n        <h3>Included sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={includedItems} setList={setIncluded} className=\"seqselection-sortable\">\n          {includedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>))}\n        </ReactSortable>\n      </div>\n      <div className=\"seqselection-excluded\">\n        <h3>Excluded sequences</h3>\n        <ReactSortable group={\"seqselection-\"+id} list={excludedItems} setList={setExcluded} className=\"seqselection-sortable\">\n          {excludedItems ?\n            excludedItems.map((item) => (<div key={item.id} className=\"seqselection-sortable-item\">{item.name}</div>)) :\n            <p className=\"seqselection-message\">Drag and drop a sequence ID here to remove it from the alignment.</p>\n          }\n        </ReactSortable>\n      </div>\n    </div>\n  );\n}\n\nfunction make_sortablejs_items(l) {\n  return l.map((item) => ({\n    id: \"sortable-\"+item,\n    selected: false,\n    chosen: false,\n    filtered: false,\n    name: item,\n  }));\n}\n\nDashSeqaln.defaultProps = {};\n\nDashSeqaln.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    title: PropTypes.string,\n\n    /**\n     * An object representing the MSA.\n     */\n    alignment: PropTypes.object,\n\n    /**\n     * List of objects, each containing the data for a bar plot.\n     */\n    series: PropTypes.array,\n\n    /**\n     * The color scheme for the alignment, from Jalview.\n     */\n    color_scheme: PropTypes.string,\n\n    /**\n     * List of sequence IDs to show in the alignment.\n     */\n    included: PropTypes.array,\n\n    /**\n     * List of sequence IDs to NOT show in the alignment.\n     */\n    excluded: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"sourceRoot":""}