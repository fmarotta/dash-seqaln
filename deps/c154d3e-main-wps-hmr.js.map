{"version":3,"sources":["webpack:///./src/lib/components/DashSeqaln.react.js"],"names":["DashSeqaln","props","id","title","alignment","included","excluded","series","setProps","allow_sequence_selection","show_letters","zoom","setIncluded","items","map","x","name","setExcluded","sequence_selection_component","React","createElement","Fragment","DashSeqalnSelect","className","seriesItem","key","label","values","value","index","style","height","color","range_max","colSpan","seqId","split","letter","_ref","includedItems","make_sortablejs_items","excludedItems","ReactSortable","group","list","setList","item","listdiff","l1","l2","filter","includes","l","selected","chosen","filtered","defaultProps","propTypes","PropTypes","string","isRequired","object","array","func"],"mappings":"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","file":"c154d3e-main-wps-hmr.js","sourcesContent":["import React, {useState} from 'react';\nimport PropTypes from 'prop-types';\nimport { ReactSortable } from 'react-sortablejs';\nimport './DashSeqaln.react.css';\n\n/**\n * ExampleComponent is an example component.\n */\nexport default function DashSeqaln(props) {\n  const {id, title, alignment, included, excluded, series, setProps} = props;\n  const {allow_sequence_selection, show_letters, zoom} = props;\n  const setIncluded = (items) => {\n    setProps({included: items.map((x) => x.name)});\n  };\n  const setExcluded = (items) => {\n    setProps({excluded: items.map((x) => x.name)});\n  };\n  let sequence_selection_component = <></>;\n  if (allow_sequence_selection === true) {\n    sequence_selection_component = DashSeqalnSelect({\n      id: id,\n      included: included,\n      excluded: excluded,\n      setIncluded: setIncluded,\n      setExcluded: setExcluded\n    });\n  }\n  return (\n    <div id={id} className=\"DashSeqaln\">\n      <h2>{title}</h2>\n      <table>\n        {series.map((seriesItem) => (\n          <thead key={\"series-\"+seriesItem.label}>\n          <tr>\n            <td className=\"series-label\">{seriesItem.label}</td>\n            {seriesItem.values.map((value, index) => (\n              <td key={\"series-\"+index} style={{\"height\": seriesItem.height}}>\n                <div style={{\"backgroundColor\": seriesItem.color, \"height\": (100 * value / (seriesItem?.range_max || 1)) + \"%\"}}></div>\n              </td>\n            ))}\n          </tr>\n          <tr><td colSpan=\"100%\"><hr style={{\"margin\": \"0px\", \"border\": \"dashed 1px lightGray\"}}></hr></td></tr>\n          </thead>\n        ))}\n      <tbody>\n        {included.map((seqId) => (\n          <tr key={\"aln-\"+seqId}>\n            <td className=\"aln-label\">{seqId}</td>\n            {alignment[seqId].split(\"\").map((letter, index) => (\n              <td key={\"aln-\"+index}>{letter}</td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n      </table>\n      {sequence_selection_component}\n    </div>\n  );\n}\n\nfunction DashSeqalnSelect({id, included, excluded, setIncluded, setExcluded}) {\n  // sortablejs needs items as objects with at least the `id` field.\n  const includedItems = make_sortablejs_items(included);\n  const excludedItems = make_sortablejs_items(excluded);\n  return (\n    <div className=\"DashSeqaln-select\">\n      <div className=\"DashSeqaln-included\">\n        <h3>Included sequences</h3>\n        <ReactSortable group={\"DashSeqaln-\"+id} list={includedItems} setList={setIncluded} className=\"Sortable\">\n          {includedItems.map((item) => (<div key={item.id} className=\"SortableItem\">{item.name}</div>))}\n        </ReactSortable>\n      </div>\n      <div className=\"DashSeqaln-excluded\">\n        <h3>Excluded sequences</h3>\n        <ReactSortable group={\"DashSeqaln-\"+id} list={excludedItems} setList={setExcluded} className=\"Sortable\">\n          {excludedItems.map((item) => (<div key={item.id} className=\"SortableItem\">{item.name}</div>))}\n        </ReactSortable>\n      </div>\n    </div>\n  );\n}\n\nfunction listdiff(l1, l2) {\n  return l1.filter((x) => !l2.includes(x));\n}\n\nfunction make_sortablejs_items(l) {\n  return l.map((item) => ({\n    id: \"sortable-\"+item,\n    selected: false,\n    chosen: false,\n    filtered: false,\n    name: item,\n  }));\n}\n\nDashSeqaln.defaultProps = {};\n\nDashSeqaln.propTypes = {\n    /**\n     * The ID used to identify this component in Dash callbacks.\n     */\n    id: PropTypes.string,\n\n    /**\n     * A label that will be printed when this component is rendered.\n     */\n    title: PropTypes.string.isRequired,\n\n    /**\n     * An object representing the MSA.\n     */\n    alignment: PropTypes.object,\n\n    /**\n     * List of objects, each containing the data for a bar plot.\n     */\n    series: PropTypes.array,\n\n    /**\n     * List of sequence IDs to show in the alignment.\n     */\n    included: PropTypes.array,\n\n    /**\n     * List of sequence IDs to NOT show in the alignment.\n     */\n    excluded: PropTypes.array,\n\n    /**\n     * Dash-assigned callback that should be called to report property changes\n     * to Dash, to make them available for callbacks.\n     */\n    setProps: PropTypes.func\n};\n"],"sourceRoot":""}